<svg viewBox="-12 -12 24 24">
  <g>
    <g class="star">
      <path class="star-half start" />
      <path class="star-half end" />
      <path class="star-outline" />
    </g>
    <path class="sparkle" />
  </g>
  <style>
    svg {
      overflow: visible;
      --c: var(--color, currentColor);
      --t: var(--time, 450ms);
      --t-fade: calc(var(--t) * .3);
    }

    .star path {
      d: var(--star-path);
    }

    .star-outline, .sparkle {  
      fill: none;
      stroke: var(--c);
    }

    .star-outline {
      stroke-linejoin: round;
      stroke-width: 1.5;
    }

    .star-half {
      fill: var(--c);
      fill-opacity: 0;
      transition: fill-opacity var(--t-fade);

      stroke: none;
      
      --clip-start: inset(0 50% 0 0);
      --clip-end: inset(0 0 0 50%);

      &.start {
        clip-path: var(--clip-start);
      }

      &.end {
        clip-path: var(--clip-end);
      }
    }

    .sparkle {
      d: var(--sparkle-path);
      stroke-linecap: round;
      stroke-dasharray: 0 0 0 14;
      stroke-dashoffset: 1;
      stroke-width: 1.5;
    }
    
    svg.reverse:not(.vertical) .star-half {
      --clip-start: inset(0 0 0 50%);
      --clip-end: inset(0 50% 0 0);
    }

    svg.vertical:not(.reverse) .star-half {
      --clip-start: inset(62% 0 0 0);
      --clip-end: inset(0 0 37.7% 0);
    }

    svg.vertical.reverse .star-half {
      --clip-start: inset(0 0 37.7% 0);
      --clip-end: inset(62% 0 0 0);
    }
    
    svg:not(.half) {
      .mark.active .star-half {
        fill-opacity: 1;
      }

      .mark.enter .star-half, .mark.leave .star-half {
        fill-opacity: .3;
      }
    }

    svg.half {
      .star-half.active {
        fill-opacity: 1;
      }

      .star-half.enter, .star-half.leave {
        fill-opacity: .3;
      }
    }

    .star, .sparkle {
      animation-delay: calc(var(--t) * (.1 * var(--i)));
      animation-duration: var(--t);
      animation-iteration-count: 1;
    }

    .star {
      --scale: 1;
      transform: scale(var(--scale));
      transform-box: fill-box;
      transform-origin: 50% 55%;
      transition: transform calc(var(--t) / 3) cubic-bezier(0, 1.2, 0.6, 1.66);
    }

    .mark.active {
      .star {
        animation-name: star-pop;
      }

      .sparkle {
        animation-name: sparkle-out;
      }
    }

    @keyframes star-pop {
      from {
        animation-timing-function: cubic-bezier(0.5, 0.5, 0, 1);
      }
      40% {
        animation-timing-function: cubic-bezier(0, 1.2, 0.6, 1.66);
        transform: scale(.4);
      }
      to {
        transform: scale(var(--scale));
      }
    }

    @keyframes sparkle-out {
      from {
        stroke-opacity: 0;
      }
      20% {
        stroke-opacity: 0;
        stroke-dasharray: 0 4 1 9;
      }
      40% {
        stroke-dasharray: 0 7 5 3;
      }
      60% {
        stroke-opacity: 1;
        stroke-dasharray: 0 9 3 2;
      }
      80 % {
        stroke-dasharray: 0 12 1 1;
      }
      90%, to {
        stroke-opacity: 0;
        stroke-dasharray: 0 14 0 0;
      }
    }

    svg {
      --star-path: path("M \
          5.231   2.700 \
         10.462  -2.399 \
          3.233  -3.450 \
          0.000 -10.000 \
         -3.233  -3.450 \
        -10.462  -2.399 \
         -5.231   2.700 \
         -6.466   9.899 \
          0.000   6.500 \
          6.466   9.899 z");
      --sparkle-path: path(" \
        M 0 1 L  11.412   4.708 \
        M 0 1 L   0.000  13.000 \
        M 0 1 L -11.412   4.708 \
        M 0 1 L  -7.053  -8.708 \
        M 0 1 L   7.053  -8.708 ");
    }
  </style>
</svg>
